(this["webpackJsonpchallenge-frontend"]=this["webpackJsonpchallenge-frontend"]||[]).push([[0],{105:function(t,e,n){t.exports=n(233)},110:function(t,e,n){},132:function(t,e,n){},141:function(t,e,n){},233:function(t,e,n){"use strict";n.r(e);var a=n(0),r=n.n(a),o=n(18),i=n.n(o),c=(n(110),n(29)),s=n.n(c),u=n(58),l=n(8),p=n(258),f=n(95),h=n(47),v=n(257),d=n(94),m=n.n(d),b=n(252),g=n(261),E=n(253),O=n(254),y=Object(b.a)((function(t){return{appBar:{top:"auto",bottom:0},grow:{flexGrow:1},button:{margin:t.spacing(1)},input:{display:"none"}}}));function j(t){var e=t.onGenerateChartButtonPress,n=y();return a.createElement(g.a,{position:"fixed",color:"primary",className:n.appBar},a.createElement(E.a,null,a.createElement(O.a,{variant:"contained",color:"secondary",className:n.button,onClick:e},"Generate Chart")))}var w=n(255),k=n(86),x=n.n(k),C=Object(b.a)((function(t){return{root:{flexGrow:1},icon:{marginLeft:t.spacing(1),marginRight:t.spacing(2)},title:{flexGrow:1}}}));function S(t){var e=t.title,n=C();return r.a.createElement("div",{className:n.root},r.a.createElement(g.a,{position:"static"},r.a.createElement(E.a,null,r.a.createElement(x.a,{className:n.icon}),r.a.createElement(w.a,{align:"left",variant:"h6",className:n.title},e))))}var M=n(27),B=(n(132),function(t){var e=t.height,n=void 0===e?"50vh":e,a=t.handleEditorChange;return r.a.createElement(M.ControlledEditor,{theme:"dark",height:n,onChange:a,language:"typescript"})}),D=n(87),N=n(88),P=n.n(N);n(141),n(142);function _(){return Math.round(255*Math.random())}function z(){return{green:_(),red:_(),blue:_()}}function G(t){return t.charAt(0).toUpperCase()+t.slice(1)}function A(t,e){var n=t.map((function(t){var e,n=Object(l.a)(t,2),a=n[0],r=n[1];return"".concat(G(a),": ").concat(G((e=r).String?e.String:e.Number?e.Number:e.Bool?e.Bool:e.Null?"Null":""))})).join(", ");return"".concat(n?n+", ":"").concat(e.split("_").reduce((function(t,e){return t?"".concat(t," ").concat(G(e)):G(e)}),""))}function H(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"fun",n=performance.now(),a=t(),r=performance.now();return console.log("Call to ".concat(e," took ")+(r-n)+" milliseconds."),[a,n,r,r-n]}function R(t){if(t){for(var e=[],n=0;n<t.events_count();n++){var a=t.get_events_data_by_idx(n);if(a){var r=a.dataset_vec().map((function(t){var e=z(),n="rgba(".concat(e.red,", ").concat(e.green,", ").concat(e.blue,", 1)"),a="rgba(".concat(e.red,", ").concat(e.green,", ").concat(e.blue,", 0.4)");return{label:A(t.group,t.selection),fill:!1,pointHoverBorderColor:"rgba(220,220,220,1)",backgroundColor:a,borderColor:n,pointBorderColor:n,pointHoverBackgroundColor:n,data:t.points.map((function(e){return{x:e.timestamp-t.points[0].timestamp,y:e.value}}))}}));e.push({datasets:r})}}return e}return[{datasets:[]}]}var I=n(89),J=n(59),L=n(45),W=n(46),F=n(57),V=function(){function t(e,n){Object(W.a)(this,t),this.value=void 0,this.timestamp=void 0,this.value=e,this.timestamp=n}return Object(F.a)(t,null,[{key:"fromEvent",value:function(e,n,a){if(e&&"data"===e.type){var r=new t(0,e.timestamp),o=!0;if(a.forEach((function(t){var n=e[t.key];o=o&&n===t.value})),o)return r.value=e[n],r}}}]),t}(),$=function t(e,n,a){Object(W.a)(this,t),this.points=void 0,this.selection=void 0,this.group=void 0,this.selection=e,this.points=a||[],this.group=n||[]},T=function(){function t(){Object(W.a)(this,t),this.startEvent=void 0,this.stopEvent=void 0,this.spanEvent=void 0,this.dataEvents=void 0,this.select=void 0,this.groupMap=void 0,this.dataEvents=[],this.groupMap={}}return Object(F.a)(t,[{key:"addDataEvent",value:function(t){if(this.dataEvents.push(t),this.startEvent&&this.startEvent.group)for(var e in this.startEvent.group){var n=this.startEvent.group[e],a=t[n];a&&this._insertInGroupMap(n,a)}}},{key:"_insertInGroupMap",value:function(t,e){this.groupMap[t]?this.groupMap[t][e]=!0:this.groupMap[t]=Object(L.a)({},e,!0)}},{key:"getDatasets",value:function(){var t=this;if(this.select&&this.select.length>0&&this.startEvent){var e=[];if(this.startEvent.group&&this.startEvent.group.length>0){var n=function(t){var e=Object(I.a)(t),n=e[0],a=e.slice(1),r=n.map((function(t){return[t]}));return a.reduce((function(t,e){return n=e,t.flatMap((function(t){return n.map((function(e){var n=Object(J.a)(t);return n.push(e),n}))}));var n}),r)}(Object.keys(this.groupMap).map((function(e){return Object.keys(t.groupMap[e]).map((function(t){return{key:e,value:t}}))})));this.select.forEach((function(t){var a=n.map((function(e){return new $(t,e)}));e.push.apply(e,Object(J.a)(a))}))}else this.select.forEach((function(t){e.push(new $(t))}));return this._getPointsFromDataSets(e).forEach((function(t,n){e[n].points=t})),e}return[]}},{key:"_getPointsFromDataSets",value:function(t){var e=this,n=[];t.forEach((function(t,e){return n[e]=[]}));var a=!!this.spanEvent,r=!!this.stopEvent,o=this.stopEvent?this.stopEvent.timestamp:0,i=this.spanEvent?this.spanEvent.end:0,c=this.spanEvent?this.spanEvent.begin:0,s=function(s){var u=e.dataEvents[s];t.forEach((function(t,e){var s=V.fromEvent(u,t.selection,t.group);s&&(r&&o>=s.timestamp||!r)&&(a&&s.timestamp>=c&&s.timestamp&&i||!a)&&n[e].push(s)}))};for(var u in this.dataEvents)s(u);return n}}]),t}();function U(t){var e=t.split(/\r\n|\n/),n=e.length,a=[],r=new T,o=!1;return e.forEach((function(t,e){var i=function(t){try{return JSON.parse(t.replace(/([\$\w]+)\s*:/g,(function(t,e){return'"'+e+'":'})).replace(/'([^']+)'/g,(function(t,e){return'"'+e+'"'})))}catch(e){return null}}(t);if(i)switch(i.type){case"start":o?(a.push(r),(r=new T).select=i.select,r.startEvent=i):(r.select=i.select,r.startEvent=i,o=!0);break;case"span":r.spanEvent=i;break;case"data":o&&r.addDataEvent(i);break;case"stop":r.stopEvent=i,a.push(r),r=new T,o=!1}e===n&&(r.startEvent&&a.push(r),r=new T)})),a}var Z=n(96),q=n(90),K=n(260),Q=n(256),X=n(259);function Y(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function tt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Y(n,!0).forEach((function(e){Object(L.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Y(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function et(t){var e=t.children,n=t.value,a=t.index,o=Object(Z.a)(t,["children","value","index"]);return r.a.createElement(w.a,Object.assign({component:"div",role:"tabpanel",hidden:n!==a,id:"wrapped-tabpanel-".concat(a),"aria-labelledby":"wrapped-tab-".concat(a)},o),n===a&&r.a.createElement(X.a,{p:3},e))}var nt=function(t){var e=Object(a.useState)(0),n=Object(l.a)(e,2),o=n[0],i=n[1];Object(a.useEffect)((function(){i(0)}),[t.data]);var c=r.a.useMemo((function(){return{maintainAspectRatio:!1,responsive:!0,scales:{xAxes:[{type:"linear",display:!0,labelString:"Milliseconds",ticks:{fontSize:"10",fontColor:"#969da5"}}],yAxes:[{display:!0,type:"linear",labelString:"Response Time",ticks:{beginAtZero:!0}}]}}}),[]),s=r.a.useMemo((function(){return{display:!0,position:"right",fullWidth:!0}}),[]);return r.a.createElement("div",null,r.a.createElement(K.a,{value:o,onChange:function(t,e){i(e)},"aria-label":"wrapped label tabs example"},t.data.map((function(t,e){return r.a.createElement(Q.a,{value:e,label:"Chart ".concat(e),key:e})}))),t.data.map((function(e,n){return r.a.createElement(et,{value:o,index:n,key:n},r.a.createElement("div",{style:{height:"100%",width:"100%",alignItems:"center",flex:1,display:"flex"}},r.a.createElement("div",{style:tt({position:"relative"},t.style)},r.a.createElement(q.a,{data:e,options:c,legend:s}))))})))},at=Object(f.a)({palette:{primary:{main:h.a[300]},secondary:{main:v.a[500]}}});function rt(t){return r.a.createElement("div",{className:"draggable-icon"},r.a.createElement(m.a,{color:"primary"}))}var ot=function(){var t=Object(a.useState)(""),e=Object(l.a)(t,2),o=e[0],i=e[1],c=Object(a.useState)(),f=Object(l.a)(c,2),h=f[0],v=f[1],d=Object(a.useState)([{datasets:[]}]),m=Object(l.a)(d,2),b=m[0],g=m[1],E=Object(a.useState)(0),O=Object(l.a)(E,2),y=O[0],w=O[1],k=function(){var t=Object(a.useState)([0,0]),e=Object(l.a)(t,2),n=e[0],r=e[1];return Object(a.useLayoutEffect)((function(){var t=P()((function(){r((function(t){return[window.innerWidth,window.innerHeight]}))}),150);return window.addEventListener("resize",t),t(),function(){return window.removeEventListener("resize",t)}}),[]),n}(),x=Object(l.a)(k,2),C=x[0],M=x[1],N=Object(a.useState)(0),_=Object(l.a)(N,2),A=_[0],I=_[1],J=Object(a.useCallback)(Object(u.a)(s.a.mark((function t(){var e,n,a,r,i,c,u,p;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:o&&h&&(e=H((function(){return U(o).map((function(t){return{datasets:t.getDatasets().map((function(t){var e=z(),n="rgba(".concat(e.red,", ").concat(e.green,", ").concat(e.blue,", 1)"),a="rgba(".concat(e.red,", ").concat(e.green,", ").concat(e.blue,", 0.4)");return{label:"".concat(t.group.reduce((function(t,e){return"".concat(t," ").concat(G(e.key),":").concat(G(e.value))}),"")).concat(G(t.selection)),fill:!1,pointHoverBorderColor:"rgba(220,220,220,1)",backgroundColor:a,borderColor:n,pointBorderColor:n,pointHoverBackgroundColor:n,data:t.points.map((function(e){return{x:e.timestamp-t.points[0].timestamp,y:e.value}}))}}))}}))}),"without wasm"),n=Object(l.a)(e,4),a=n[0],r=n[3],i=H((function(){var t=h.Events.from_text(o);return t?R(t):[]}),"with wasm"),c=Object(l.a)(i,4),u=c[0],p=c[3],g(r<p?a:u));case 1:case"end":return t.stop()}}),t)}))),[o,h]);Object(a.useEffect)((function(){0===A&&(I(M/2),w(M/2-64))}),[M,A]),Object(a.useEffect)((function(){Object(u.a)(s.a.mark((function t(){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=v,t.next=3,n.e(3).then(n.bind(null,262));case 3:t.t1=t.sent,(0,t.t0)(t.t1);case 5:case"end":return t.stop()}}),t)})))()}),[]);var L=M-y-128;return r.a.createElement("div",{className:"App"},r.a.createElement(p.a,{theme:at},r.a.createElement(S,{title:"Jordao's Challenge"}),r.a.createElement("div",{style:{height:M-128}},r.a.createElement(D.ResizableBox,{height:A-64,width:1/0,axis:"y",minConstraints:[0,.25*(M-128)],maxConstraints:[1/0,.75*(M-128)],onResize:function(t,e){e.element;var n=e.size;e.handle;w(n.height)},resizeHandles:["s"],handle:rt},r.a.createElement(B,{height:y,handleEditorChange:function(t,e){e&&i(e)}})),r.a.createElement("div",{style:{height:L,width:C}},r.a.createElement(nt,{data:b,style:{height:"".concat(.9*L-64,"px"),width:"".concat(C,"px")}}))),r.a.createElement(j,{onGenerateChartButtonPress:J})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));M.monaco.init().then((function(t){t.languages.typescript.typescriptDefaults.setDiagnosticsOptions({noSemanticValidation:!0,noSyntaxValidation:!0})})).catch((function(t){return console.error("An error occurred during initialization of Monaco: ",t)})),i.a.render(r.a.createElement(ot,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()}))}},[[105,1,2]]]);
//# sourceMappingURL=main.82ac5a8e.chunk.js.map