(this["webpackJsonpchallenge-frontend"]=this["webpackJsonpchallenge-frontend"]||[]).push([[0],{121:function(t,e,n){t.exports=n(247)},126:function(t,e,n){},148:function(t,e,n){},156:function(t,e,n){},247:function(t,e,n){"use strict";n.r(e);var a=n(0),r=n.n(a),o=n(7),i=n.n(o),c=(n(126),n(44)),s=n.n(c),u=n(73),l=n(12),p=n(290),h=n(109),f=n(63),v=n(289),d=n(108),m=n.n(d),g=n(281),b=n(283),E=n(285),O=n(287),y=n(286),j=n(294),w=n(291),k=Object(g.a)((function(t){return{appBar:{top:"auto",bottom:0,flexGrow:1},grow:{flexGrow:1},button:{margin:t.spacing(1)},input:{display:"none"}}}));function C(t){var e=t.onGenerateChartButtonPress,n=t.shouldInterpolate,r=void 0===n||n,o=t.onCheckBoxPressed,i=t.defaultInterpolateInterval,c=void 0===i?100:i,s=t.onInterpolateIntervalChange,u=k();return a.createElement(b.a,{position:"fixed",color:"primary",className:u.appBar},a.createElement(E.a,null,a.createElement(y.a,{align:"left",className:u.grow},a.createElement(O.a,{variant:"contained",color:"secondary",className:u.button,onClick:e},"Generate Chart")),a.createElement(y.a,{align:"right"},"should Interpolate?",a.createElement(j.a,{checked:r,onChange:o,value:"shouldInterpolate"})),a.createElement(w.a,{defaultValue:c,label:"Number of Points:",type:"number",InputLabelProps:{shrink:!0},onChange:s,inputProps:{style:{textAlign:"center"}}})))}var x=n(101),S=n.n(x),I=Object(g.a)((function(t){return{root:{flexGrow:1},icon:{marginLeft:t.spacing(1),marginRight:t.spacing(2)},title:{flexGrow:1}}}));function M(t){var e=t.title,n=I();return r.a.createElement("div",{className:n.root},r.a.createElement(b.a,{position:"static"},r.a.createElement(E.a,null,r.a.createElement(S.a,{className:n.icon}),r.a.createElement(y.a,{align:"left",variant:"h6",className:n.title},e))))}var B=n(41),P=(n(148),function(t){var e=t.height,n=void 0===e?"50vh":e,a=t.handleEditorChange;return r.a.createElement(B.ControlledEditor,{theme:"dark",height:n,onChange:a,language:"typescript"})}),_=n(102),D=n(59),N=n.n(D);n(156);function G(){return Math.round(255*Math.random())}function A(){return{green:G(),red:G(),blue:G()}}function z(t){return t.charAt(0).toUpperCase()+t.slice(1)}function H(t,e){var n=t.map((function(t){var e,n=Object(l.a)(t,2),a=n[0],r=n[1];return"".concat(z(a),": ").concat(z((e=r).String?e.String:e.Number?e.Number:e.Bool?e.Bool:e.Null?"Null":""))})).join(", ");return"".concat(n?n+", ":"").concat(e.split("_").reduce((function(t,e){return t?"".concat(t," ").concat(z(e)):z(e)}),""))}function L(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"fun",n=performance.now(),a=t(),r=performance.now();return console.log("Call to ".concat(e," took ")+(r-n)+" milliseconds."),[a,n,r,r-n]}var R=n(103),W=n(74),J=n(42),V=n(62),F=n(43),T=n(61),U=function(){function t(e,n){Object(F.a)(this,t),this.value=void 0,this.timestamp=void 0,this.value=e,this.timestamp=n}return Object(T.a)(t,null,[{key:"fromEvent",value:function(e,n,a){if(e&&"data"===e.type){var r=new t(0,e.timestamp),o=!0;if(a.forEach((function(t){var n=e[t.key];o=o&&n===t.value})),o)return r.value=e[n],r}}}]),t}(),Z=function t(e,n,a){Object(F.a)(this,t),this.points=void 0,this.selection=void 0,this.group=void 0,this.selection=e,this.points=a||[],this.group=n||[]},$=function(){function t(){Object(F.a)(this,t),this.start=void 0,this.stop=void 0,this.span=void 0,this.data_events=void 0,this.group_map=void 0,this.data_events=[],this.group_map={}}return Object(T.a)(t,[{key:"addDataEvent",value:function(t){var e=t.type,n=t.timestamp,a=Object(V.a)(t,["type","timestamp"]);if(this.data_events.push({type:e,timestamp:n,data:a}),this.start&&this.start.group)for(var r in this.start.group){var o=this.start.group[r],i=t[o];i&&this._insertInGroupMap(o,i)}}},{key:"_insertInGroupMap",value:function(t,e){this.group_map[t]?this.group_map[t][e]=!0:this.group_map[t]=Object(J.a)({},e,!0)}}]),t}(),q=function(){function t(){Object(F.a)(this,t),this.startEvent=void 0,this.stopEvent=void 0,this.spanEvent=void 0,this.dataEvents=void 0,this.select=void 0,this.groupMap=void 0,this.dataEvents=[],this.groupMap={}}return Object(T.a)(t,[{key:"addDataEvent",value:function(t){if(this.dataEvents.push(t),this.startEvent&&this.startEvent.group)for(var e in this.startEvent.group){var n=this.startEvent.group[e],a=t[n];a&&this._insertInGroupMap(n,a)}}},{key:"_insertInGroupMap",value:function(t,e){this.groupMap[t]?this.groupMap[t][e]=!0:this.groupMap[t]=Object(J.a)({},e,!0)}},{key:"getDatasets",value:function(){var t=this;if(this.select&&this.select.length>0&&this.startEvent){var e=[];if(this.startEvent.group&&this.startEvent.group.length>0){var n=function(t){var e=Object(R.a)(t),n=e[0],a=e.slice(1),r=n.map((function(t){return[t]}));return a.reduce((function(t,e){return n=e,t.flatMap((function(t){return n.map((function(e){var n=Object(W.a)(t);return n.push(e),n}))}));var n}),r)}(Object.keys(this.groupMap).map((function(e){return Object.keys(t.groupMap[e]).map((function(t){return{key:e,value:t}}))})));this.select.forEach((function(t){var a=n.map((function(e){return new Z(t,e)}));e.push.apply(e,Object(W.a)(a))}))}else this.select.forEach((function(t){e.push(new Z(t))}));return this._getPointsFromDataSets(e).forEach((function(t,n){e[n].points=t})),e}return[]}},{key:"_getPointsFromDataSets",value:function(t){var e=this,n=[];t.forEach((function(t,e){return n[e]=[]}));var a=!!this.spanEvent,r=!!this.stopEvent,o=this.stopEvent?this.stopEvent.timestamp:0,i=this.spanEvent?this.spanEvent.end:0,c=this.spanEvent?this.spanEvent.begin:0,s=function(s){var u=e.dataEvents[s];t.forEach((function(t,e){var s=U.fromEvent(u,t.selection,t.group);s&&(r&&o>=s.timestamp||!r)&&(a&&s.timestamp>=c&&s.timestamp&&i||!a)&&n[e].push(s)}))};for(var u in this.dataEvents)s(u);return n}}]),t}();function K(t){var e=t.split(/\r\n|\n/),n=e.length,a=[],r=new $,o=!1;return e.forEach((function(t,e){var i=X(t);if(i)switch(i.type){case"start":o?(a.push(r),(r=new $).start=i):(r.start=i,o=!0);break;case"span":r.span=i;break;case"data":o&&r.addDataEvent(i);break;case"stop":r.stop=i,a.push(r),r=new $,o=!1}e===n&&(r.start&&a.push(r),r=new $)})),a}function Q(t){var e=t.split(/\r\n|\n/),n=e.length,a=[],r=new q,o=!1;return e.forEach((function(t,e){var i=X(t);if(i)switch(i.type){case"start":o?(a.push(r),(r=new q).select=i.select,r.startEvent=i):(r.select=i.select,r.startEvent=i,o=!0);break;case"span":r.spanEvent=i;break;case"data":o&&r.addDataEvent(i);break;case"stop":r.stopEvent=i,a.push(r),r=new q,o=!1}e===n&&(r.startEvent&&a.push(r),r=new q)})),a}function X(t){try{return JSON.parse(t.replace(/([\w]+)\s*:/g,(function(t,e){return'"'+e+'":'})).replace(/'([^']+)'/g,(function(t,e){return'"'+e+'"'})))}catch(e){return null}}var Y=n(104),tt=n(293),et=n(288),nt=n(292);function at(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function rt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?at(n,!0).forEach((function(e){Object(J.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):at(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function ot(t){var e=t.children,n=t.value,a=t.index,o=Object(V.a)(t,["children","value","index"]);return r.a.createElement(y.a,Object.assign({component:"div",role:"tabpanel",hidden:n!==a,id:"wrapped-tabpanel-".concat(a),"aria-labelledby":"wrapped-tab-".concat(a)},o),n===a&&r.a.createElement(nt.a,{p:3},e))}var it=function(t){var e=Object(a.useState)(0),n=Object(l.a)(e,2),o=n[0],i=n[1];Object(a.useEffect)((function(){i(0)}),[t.data]);var c=r.a.useMemo((function(){return{maintainAspectRatio:!1,responsive:!0,scales:{xAxes:[{type:"time",display:!0,labelString:"Milliseconds",ticks:{fontSize:"10",fontColor:"#969da5"}}],yAxes:[{display:!0,type:"linear",labelString:"Response Time",ticks:{beginAtZero:!0}}]}}}),[]),s=r.a.useMemo((function(){return{display:!0,position:"right",fullWidth:!0}}),[]);return r.a.createElement("div",null,r.a.createElement(tt.a,{value:o,onChange:function(t,e){i(e)},"aria-label":"wrapped label tabs example"},t.data.map((function(t,e){return r.a.createElement(et.a,{value:e,label:"Chart ".concat(e),key:e})}))),t.data.map((function(e,n){return r.a.createElement(ot,{value:o,index:n,key:n},r.a.createElement("div",{style:{height:"100%",width:"100%",alignItems:"center",flex:1,display:"flex"}},r.a.createElement("div",{style:rt({position:"relative"},t.style)},r.a.createElement(Y.a,{data:e,options:c,legend:s}))))})))},ct=Object(h.a)({palette:{primary:{main:f.a[300]},secondary:{main:v.a[500]}}});function st(t){return r.a.createElement("div",{className:"draggable-icon"},r.a.createElement(m.a,{color:"primary"}))}var ut=function(){var t=Object(a.useState)(""),e=Object(l.a)(t,2),o=e[0],i=e[1],c=Object(a.useState)(),h=Object(l.a)(c,2),f=h[0],v=(h[1],Object(a.useState)()),d=Object(l.a)(v,2),m=d[0],g=d[1],b=Object(a.useState)([{datasets:[]}]),E=Object(l.a)(b,2),O=E[0],y=E[1],j=Object(a.useState)(0),w=Object(l.a)(j,2),k=w[0],x=w[1],S=Object(a.useState)(100),I=Object(l.a)(S,2),B=I[0],D=I[1],G=function(){var t=Object(a.useState)([0,0]),e=Object(l.a)(t,2),n=e[0],r=e[1];return Object(a.useLayoutEffect)((function(){var t=N()((function(){r((function(t){return[window.innerWidth,window.innerHeight]}))}),150);return window.addEventListener("resize",t),t(),function(){return window.removeEventListener("resize",t)}}),[]),n}(),R=Object(l.a)(G,2),W=R[0],J=R[1],V=Object(a.useState)(0),F=Object(l.a)(V,2),T=F[0],U=F[1],Z=Object(a.useState)(!0),$=Object(l.a)(Z,2),q=$[0],X=$[1],Y=Object(a.useCallback)(Object(u.a)(s.a.mark((function t(){var e,n,a,r,i;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:o&&m&&(e=L((function(){return Q(o).map((function(t){return{datasets:t.getDatasets().map((function(t){var e=A(),n="rgba(".concat(e.red,", ").concat(e.green,", ").concat(e.blue,", 1)"),a="rgba(".concat(e.red,", ").concat(e.green,", ").concat(e.blue,", 0.4)");return{label:"".concat(t.group.reduce((function(t,e){return"".concat(t," ").concat(z(e.key),":").concat(z(e.value))}),"")).concat(z(t.selection)),fill:!1,pointHoverBorderColor:"rgba(220,220,220,1)",backgroundColor:a,borderColor:n,pointBorderColor:n,pointHoverBackgroundColor:n,data:t.points.map((function(e){return{x:e.timestamp-t.points[0].timestamp,y:e.value}}))}}))}}))}),"without wasm"),n=Object(l.a)(e,4),n[0],n[3],a=L((function(){return m.EventsData.process_js_value(K(o),q,BigInt(B))}),"with wasm"),r=Object(l.a)(a,4),i=r[0],r[3],y((c=i)?c.map((function(t){return{datasets:t.map((function(t){var e=A(),n="rgba(".concat(e.red,", ").concat(e.green,", ").concat(e.blue,", 1)"),a="rgba(".concat(e.red,", ").concat(e.green,", ").concat(e.blue,", 0.4)");return{label:H(t.group,t.selection),fill:!1,pointHoverBorderColor:"rgba(220,220,220,1)",backgroundColor:a,borderColor:n,pointBorderColor:n,pointHoverBackgroundColor:n,data:t.points.map((function(e){return{x:e.timestamp-t.points[0].timestamp,y:e.value}}))}}))}})):[]));case 1:case"end":return t.stop()}var c}),t)}))),[q,B,f,o,m]);Object(a.useEffect)((function(){0===T&&(U(J/2),x(J/2-64))}),[J,T]),Object(a.useEffect)((function(){Object(u.a)(s.a.mark((function t(){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=g,t.next=3,n.e(3).then(n.bind(null,295));case 3:t.t1=t.sent,(0,t.t0)(t.t1);case 5:case"end":return t.stop()}}),t)})))()}),[]);var tt=Object(a.useCallback)(N()((function(t){D(t&&t>2?t:2)}),500,{leading:!1}),[]),et=J-k-128;return r.a.createElement("div",{className:"App"},r.a.createElement(p.a,{theme:ct},r.a.createElement(M,{title:"Jordao's Challenge"}),r.a.createElement("div",{style:{height:J-128}},r.a.createElement(_.Resizable,{enable:{top:!1,right:!1,bottom:!0,left:!1,topRight:!1,bottomRight:!1,bottomLeft:!1,topLeft:!1},defaultSize:{height:T-64,width:1/0},minWidth:0,maxWidth:W,minHeight:.25*(J-128),maxHeight:.75*(J-128),onResize:function(t,e,n,a){var r=parseInt(n.style.height.replace("px",""));r&&x(r)},handleComponent:{bottom:r.a.createElement(st,null)}},r.a.createElement(P,{height:k,handleEditorChange:function(t,e){e&&i(e)}})),r.a.createElement("div",{style:{height:et,width:W}},r.a.createElement(it,{data:O,style:{height:"".concat(.9*et-64,"px"),width:"".concat(W,"px")}}))),r.a.createElement(C,{onGenerateChartButtonPress:Y,shouldInterpolate:q,onCheckBoxPressed:function(t,e){X(e)},defaultInterpolateInterval:B,onInterpolateIntervalChange:function(t){return tt(parseInt(t.target.value))}})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));B.monaco.init().then((function(t){t.languages.typescript.typescriptDefaults.setDiagnosticsOptions({noSemanticValidation:!0,noSyntaxValidation:!0})})).catch((function(t){return console.error("An error occurred during initialization of Monaco: ",t)})),i.a.render(r.a.createElement(ut,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()}))}},[[121,1,2]]]);
//# sourceMappingURL=main.9add4f58.chunk.js.map